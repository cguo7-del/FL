"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/search-quotes";
exports.ids = ["pages/api/search-quotes"];
exports.modules = {

/***/ "@supabase/supabase-js":
/*!****************************************!*\
  !*** external "@supabase/supabase-js" ***!
  \****************************************/
/***/ ((module) => {

module.exports = require("@supabase/supabase-js");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fsearch-quotes&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fsearch-quotes.js&middlewareConfigBase64=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fsearch-quotes&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fsearch-quotes.js&middlewareConfigBase64=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_search_quotes_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/search-quotes.js */ \"(api)/./pages/api/search-quotes.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_search_quotes_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_search_quotes_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/search-quotes\",\n        pathname: \"/api/search-quotes\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_search_quotes_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnNlYXJjaC1xdW90ZXMmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyUyRmFwaSUyRnNlYXJjaC1xdW90ZXMuanMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDeUQ7QUFDekQ7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLHdEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyx3REFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mYW5nbHVlLXdlYnNpdGUvP2VkNmQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzL2FwaS9zZWFyY2gtcXVvdGVzLmpzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvc2VhcmNoLXF1b3Rlc1wiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3NlYXJjaC1xdW90ZXNcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fsearch-quotes&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fsearch-quotes.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/supabase.js":
/*!*************************!*\
  !*** ./lib/supabase.js ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   dbOperations: () => (/* binding */ dbOperations),\n/* harmony export */   supabase: () => (/* binding */ supabase)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"@supabase/supabase-js\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__);\n\n// Supabase配置 - 支持环境变量和fallback\nconst supabaseUrl = process.env.SUPABASE_URL || \"https://crnfwlpcxrnqfgwqnmun.supabase.co\";\nconst supabaseAnonKey = process.env.SUPABASE_ANON_KEY || \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNybmZ3bHBjeHJucWZnd3FubXVuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUxNTAzMDQsImV4cCI6MjA3MDcyNjMwNH0.g_HmFQQiuGW2TZRzZ5gqCj098DZy6iwn_xQAE6kEUEI\";\n// 创建Supabase客户端实例\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseAnonKey);\n// 数据库操作函数\nconst dbOperations = {\n    // 暴露 supabase 客户端实例\n    supabase,\n    // 插入数据\n    async insert (table, data) {\n        const { data: result, error } = await supabase.from(table).insert(data).select();\n        if (error) {\n            console.error(\"插入数据错误:\", error);\n            throw error;\n        }\n        return result;\n    },\n    // 查询数据\n    async select (table, filters = {}) {\n        let query = supabase.from(table).select(\"*\");\n        // 应用过滤条件\n        Object.entries(filters).forEach(([key, value])=>{\n            query = query.eq(key, value);\n        });\n        const { data, error } = await query;\n        if (error) {\n            console.error(\"查询数据错误:\", error);\n            throw error;\n        }\n        return data;\n    },\n    // 更新数据\n    async update (table, id, data) {\n        const { data: result, error } = await supabase.from(table).update(data).eq(\"id\", id).select();\n        if (error) {\n            console.error(\"更新数据错误:\", error);\n            throw error;\n        }\n        return result;\n    },\n    // 删除数据\n    async delete (table, id) {\n        const { error } = await supabase.from(table).delete().eq(\"id\", id);\n        if (error) {\n            console.error(\"删除数据错误:\", error);\n            throw error;\n        }\n        return true;\n    },\n    // 测试连接\n    async testConnection () {\n        try {\n            // 使用简单的RPC调用来测试连接\n            const { data, error } = await supabase.rpc(\"version\");\n            if (error) {\n                // 如果RPC调用失败，尝试查询一个可能不存在的表来测试连接\n                const { error: testError } = await supabase.from(\"test_connection_table\").select(\"*\").limit(1);\n                // 如果错误是表不存在，说明连接正常\n                if (testError && (testError.code === \"PGRST116\" || testError.code === \"42P01\")) {\n                    console.log(\"数据库连接成功!\");\n                    return true;\n                }\n                console.error(\"数据库连接测试失败:\", testError || error);\n                return false;\n            }\n            console.log(\"数据库连接成功!\");\n            return true;\n        } catch (err) {\n            console.error(\"连接测试异常:\", err);\n            return false;\n        }\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SCxLQUFLLENBQUMsV0FBV3FCO1lBQ3pCLE9BQU87UUFDVDtJQUNGO0FBQ0YsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2ZhbmdsdWUtd2Vic2l0ZS8uL2xpYi9zdXBhYmFzZS5qcz8xNTk4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcydcblxuLy8gU3VwYWJhc2XphY3nva4gLSDmlK/mjIHnjq/looPlj5jph4/lkoxmYWxsYmFja1xuY29uc3Qgc3VwYWJhc2VVcmwgPSBwcm9jZXNzLmVudi5TVVBBQkFTRV9VUkwgfHwgJ2h0dHBzOi8vY3JuZndscGN4cm5xZmd3cW5tdW4uc3VwYWJhc2UuY28nXG5jb25zdCBzdXBhYmFzZUFub25LZXkgPSBwcm9jZXNzLmVudi5TVVBBQkFTRV9BTk9OX0tFWSB8fCAnZXlKaGJHY2lPaUpJVXpJMU5pSXNJblI1Y0NJNklrcFhWQ0o5LmV5SnBjM01pT2lKemRYQmhZbUZ6WlNJc0luSmxaaUk2SW1OeWJtWjNiSEJqZUhKdWNXWm5kM0Z1YlhWdUlpd2ljbTlzWlNJNkltRnViMjRpTENKcFlYUWlPakUzTlRVeE5UQXpNRFFzSW1WNGNDSTZNakEzTURjeU5qTXdOSDAuZ19IbUZRUWl1R1cyVFpSelo1Z3FDajA5OERaeTZpd25feFFBRTZrRVVFSSdcblxuLy8g5Yib5bu6U3VwYWJhc2XlrqLmiLfnq6/lrp7kvotcbmV4cG9ydCBjb25zdCBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VBbm9uS2V5KVxuXG4vLyDmlbDmja7lupPmk43kvZzlh73mlbBcbmV4cG9ydCBjb25zdCBkYk9wZXJhdGlvbnMgPSB7XG4gIC8vIOaatOmcsiBzdXBhYmFzZSDlrqLmiLfnq6/lrp7kvotcbiAgc3VwYWJhc2UsXG4gIC8vIOaPkuWFpeaVsOaNrlxuICBhc3luYyBpbnNlcnQodGFibGUsIGRhdGEpIHtcbiAgICBjb25zdCB7IGRhdGE6IHJlc3VsdCwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSh0YWJsZSlcbiAgICAgIC5pbnNlcnQoZGF0YSlcbiAgICAgIC5zZWxlY3QoKVxuICAgIFxuICAgIGlmIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign5o+S5YWl5pWw5o2u6ZSZ6K+vOicsIGVycm9yKVxuICAgICAgdGhyb3cgZXJyb3JcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdFxuICB9LFxuXG4gIC8vIOafpeivouaVsOaNrlxuICBhc3luYyBzZWxlY3QodGFibGUsIGZpbHRlcnMgPSB7fSkge1xuICAgIGxldCBxdWVyeSA9IHN1cGFiYXNlLmZyb20odGFibGUpLnNlbGVjdCgnKicpXG4gICAgXG4gICAgLy8g5bqU55So6L+H5ruk5p2h5Lu2XG4gICAgT2JqZWN0LmVudHJpZXMoZmlsdGVycykuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgICBxdWVyeSA9IHF1ZXJ5LmVxKGtleSwgdmFsdWUpXG4gICAgfSlcbiAgICBcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBxdWVyeVxuICAgIFxuICAgIGlmIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign5p+l6K+i5pWw5o2u6ZSZ6K+vOicsIGVycm9yKVxuICAgICAgdGhyb3cgZXJyb3JcbiAgICB9XG4gICAgcmV0dXJuIGRhdGFcbiAgfSxcblxuICAvLyDmm7TmlrDmlbDmja5cbiAgYXN5bmMgdXBkYXRlKHRhYmxlLCBpZCwgZGF0YSkge1xuICAgIGNvbnN0IHsgZGF0YTogcmVzdWx0LCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKHRhYmxlKVxuICAgICAgLnVwZGF0ZShkYXRhKVxuICAgICAgLmVxKCdpZCcsIGlkKVxuICAgICAgLnNlbGVjdCgpXG4gICAgXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfmm7TmlrDmlbDmja7plJnor686JywgZXJyb3IpXG4gICAgICB0aHJvdyBlcnJvclxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0XG4gIH0sXG5cbiAgLy8g5Yig6Zmk5pWw5o2uXG4gIGFzeW5jIGRlbGV0ZSh0YWJsZSwgaWQpIHtcbiAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20odGFibGUpXG4gICAgICAuZGVsZXRlKClcbiAgICAgIC5lcSgnaWQnLCBpZClcbiAgICBcbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+WIoOmZpOaVsOaNrumUmeivrzonLCBlcnJvcilcbiAgICAgIHRocm93IGVycm9yXG4gICAgfVxuICAgIHJldHVybiB0cnVlXG4gIH0sXG5cbiAgLy8g5rWL6K+V6L+e5o6lXG4gIGFzeW5jIHRlc3RDb25uZWN0aW9uKCkge1xuICAgIHRyeSB7XG4gICAgICAvLyDkvb/nlKjnroDljZXnmoRSUEPosIPnlKjmnaXmtYvor5Xov57mjqVcbiAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLnJwYygndmVyc2lvbicpXG4gICAgICBcbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAvLyDlpoLmnpxSUEPosIPnlKjlpLHotKXvvIzlsJ3or5Xmn6Xor6LkuIDkuKrlj6/og73kuI3lrZjlnKjnmoTooajmnaXmtYvor5Xov57mjqVcbiAgICAgICAgY29uc3QgeyBlcnJvcjogdGVzdEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAgIC5mcm9tKCd0ZXN0X2Nvbm5lY3Rpb25fdGFibGUnKVxuICAgICAgICAgIC5zZWxlY3QoJyonKVxuICAgICAgICAgIC5saW1pdCgxKVxuICAgICAgICBcbiAgICAgICAgLy8g5aaC5p6c6ZSZ6K+v5piv6KGo5LiN5a2Y5Zyo77yM6K+05piO6L+e5o6l5q2j5bi4XG4gICAgICAgIGlmICh0ZXN0RXJyb3IgJiYgKHRlc3RFcnJvci5jb2RlID09PSAnUEdSU1QxMTYnIHx8IHRlc3RFcnJvci5jb2RlID09PSAnNDJQMDEnKSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCfmlbDmja7lupPov57mjqXmiJDlip8hJylcbiAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjb25zb2xlLmVycm9yKCfmlbDmja7lupPov57mjqXmtYvor5XlpLHotKU6JywgdGVzdEVycm9yIHx8IGVycm9yKVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coJ+aVsOaNruW6k+i/nuaOpeaIkOWKnyEnKVxuICAgICAgcmV0dXJuIHRydWVcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+i/nuaOpea1i+ivleW8guW4uDonLCBlcnIpXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gIH1cbn0iXSwibmFtZXMiOlsiY3JlYXRlQ2xpZW50Iiwic3VwYWJhc2VVcmwiLCJwcm9jZXNzIiwiZW52IiwiU1VQQUJBU0VfVVJMIiwic3VwYWJhc2VBbm9uS2V5IiwiU1VQQUJBU0VfQU5PTl9LRVkiLCJzdXBhYmFzZSIsImRiT3BlcmF0aW9ucyIsImluc2VydCIsInRhYmxlIiwiZGF0YSIsInJlc3VsdCIsImVycm9yIiwiZnJvbSIsInNlbGVjdCIsImNvbnNvbGUiLCJmaWx0ZXJzIiwicXVlcnkiLCJPYmplY3QiLCJlbnRyaWVzIiwiZm9yRWFjaCIsImtleSIsInZhbHVlIiwiZXEiLCJ1cGRhdGUiLCJpZCIsImRlbGV0ZSIsInRlc3RDb25uZWN0aW9uIiwicnBjIiwidGVzdEVycm9yIiwibGltaXQiLCJjb2RlIiwibG9nIiwiZXJyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/supabase.js\n");

/***/ }),

/***/ "(api)/./pages/api/search-quotes.js":
/*!************************************!*\
  !*** ./pages/api/search-quotes.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_supabase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/supabase */ \"(api)/./lib/supabase.js\");\n\nasync function handler(req, res) {\n    if (req.method !== \"POST\") {\n        return res.status(405).json({\n            error: \"仅支持POST请求\"\n        });\n    }\n    try {\n        const { question, strategy_category } = req.body;\n        if (!question || !strategy_category) {\n            return res.status(400).json({\n                error: \"缺少必要参数：question 和 strategy_category\"\n            });\n        }\n        console.log(\"收到搜索请求:\", {\n            question,\n            strategy_category\n        });\n        // 步骤1: 根据用户选定的方向从Supabase选择书籍\n        const selectedBook = await selectBookByStrategy(strategy_category);\n        if (!selectedBook) {\n            return res.status(404).json({\n                error: \"未找到对应策略的书籍\"\n            });\n        }\n        console.log(\"选中的书籍:\", selectedBook.book_name);\n        // 步骤2: 用AI搜索该书籍中回答用户问题的1-3句原文\n        const originalText = await searchOriginalTextWithAI(selectedBook.book_name, question);\n        if (!originalText) {\n            return res.status(500).json({\n                error: \"未能找到相关原文\",\n                quote: \"智者顺时而谋，愚者逆势而动。\",\n                bookName: selectedBook.book_name,\n                chapterName: \"经典智慧\",\n                source: `${selectedBook.book_name}·经典智慧`,\n                fromNetworkSearch: false\n            });\n        }\n        console.log(\"找到的原文:\", originalText);\n        // 步骤3: 根据原文用AI搜索对应的章节名称\n        const chapterName = await searchChapterNameWithAI(selectedBook.book_name, originalText);\n        console.log(\"识别的章节名:\", chapterName);\n        return res.status(200).json({\n            quote: originalText,\n            bookName: selectedBook.book_name,\n            chapterName: chapterName || \"未知章节\",\n            source: `${selectedBook.book_name}·${chapterName || \"未知章节\"}`,\n            searchQuery: question,\n            fromNetworkSearch: true,\n            strategy_category: strategy_category\n        });\n    } catch (error) {\n        console.error(\"搜索引用失败:\", error);\n        return res.status(500).json({\n            error: \"搜索服务暂时不可用\",\n            quote: \"智者顺时而谋，愚者逆势而动。\",\n            bookName: \"智慧经典\",\n            chapterName: \"第一章\",\n            source: \"智慧经典\\xb7第一章\",\n            fromNetworkSearch: false\n        });\n    }\n}\n// 根据策略类别从Supabase选择书籍\nasync function selectBookByStrategy(strategy_category) {\n    try {\n        const { data: books, error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"book_library\").select(\"*\").eq(\"strategy_category\", strategy_category);\n        if (error) {\n            console.error(\"查询书籍失败:\", error);\n            return null;\n        }\n        if (!books || books.length === 0) {\n            console.log(\"未找到对应策略的书籍:\", strategy_category);\n            return null;\n        }\n        // 随机选择一本书\n        const randomIndex = Math.floor(Math.random() * books.length);\n        return books[randomIndex];\n    } catch (error) {\n        console.error(\"选择书籍时出错:\", error);\n        return null;\n    }\n}\n// 用AI搜索书籍中回答用户问题的原文\nasync function searchOriginalTextWithAI(bookName, question) {\n    try {\n        // 构建搜索查询\n        const searchQuery = `请从《${bookName}》中找出能够回答\"${question}\"这个问题的1-3句经典原文，要求：1. 必须是该书的原文内容；2. 内容要与问题高度相关；3. 返回格式为纯文本，不要解释`;\n        console.log(\"AI搜索原文查询:\", searchQuery);\n        // 调用DeepSeek API\n        const response = await fetch(\"https://api.deepseek.com/chat/completions\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"Authorization\": \"Bearer sk-3dd5328db9d44d9cb4e6e7df02ee4b2d\"\n            },\n            body: JSON.stringify({\n                model: \"deepseek-chat\",\n                messages: [\n                    {\n                        role: \"user\",\n                        content: searchQuery\n                    }\n                ],\n                temperature: 0.7,\n                max_tokens: 2000,\n                stream: false\n            })\n        });\n        if (!response.ok) {\n            console.log(\"DeepSeek API调用失败，尝试备用方案\");\n            return await searchOriginalTextFallback(bookName, question);\n        }\n        const data = await response.json();\n        if (data.choices && data.choices.length > 0 && data.choices[0].message.content && data.choices[0].message.content.length > 10) {\n            const content = data.choices[0].message.content;\n            // 提取原文内容\n            const originalText = extractOriginalText(content, bookName);\n            if (originalText && originalText.length > 10) {\n                return originalText;\n            }\n        }\n        // 如果API结果不理想，使用备用方案\n        return await searchOriginalTextFallback(bookName, question);\n    } catch (error) {\n        console.error(\"AI搜索原文失败:\", error);\n        return await searchOriginalTextFallback(bookName, question);\n    }\n}\n// 备用方案：从数据库内容中搜索原文\nasync function searchOriginalTextFallback(bookName, question) {\n    try {\n        const { data: books, error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"book_library\").select(\"*\").eq(\"book_name\", bookName).limit(1);\n        if (error || !books || books.length === 0) {\n            return null;\n        }\n        const book = books[0];\n        if (!book.chapter_content) {\n            return null;\n        }\n        // 从章节内容中提取相关句子\n        const sentences = extractRelevantSentences(book.chapter_content, question);\n        if (sentences.length > 0) {\n            return sentences.slice(0, 3).join(\"，\");\n        }\n        return null;\n    } catch (error) {\n        console.error(\"备用搜索失败:\", error);\n        return null;\n    }\n}\n// 用AI搜索章节名称\nasync function searchChapterNameWithAI(bookName, originalText) {\n    try {\n        const searchQuery = `这段原文\"${originalText}\"出自《${bookName}》的哪个章节？请只返回章节名称，不要其他解释`;\n        console.log(\"AI搜索章节名查询:\", searchQuery);\n        const response = await fetch(\"https://api.deepseek.com/chat/completions\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"Authorization\": \"Bearer sk-3dd5328db9d44d9cb4e6e7df02ee4b2d\"\n            },\n            body: JSON.stringify({\n                model: \"deepseek-chat\",\n                messages: [\n                    {\n                        role: \"user\",\n                        content: searchQuery\n                    }\n                ],\n                temperature: 0.7,\n                max_tokens: 2000,\n                stream: false\n            })\n        });\n        if (!response.ok) {\n            return await searchChapterNameFallback(bookName, originalText);\n        }\n        const data = await response.json();\n        if (data.choices && data.choices.length > 0 && data.choices[0].message.content) {\n            const chapterName = extractChapterName(data.choices[0].message.content);\n            if (chapterName) {\n                return chapterName;\n            }\n        }\n        return await searchChapterNameFallback(bookName, originalText);\n    } catch (error) {\n        console.error(\"AI搜索章节名失败:\", error);\n        return await searchChapterNameFallback(bookName, originalText);\n    }\n}\n// 备用方案：从数据库获取章节名\nasync function searchChapterNameFallback(bookName, originalText) {\n    try {\n        const { data: books, error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"book_library\").select(\"*\").eq(\"book_name\", bookName);\n        if (error || !books || books.length === 0) {\n            return \"经典篇章\";\n        }\n        // 尝试在章节内容中找到匹配的原文\n        for (const book of books){\n            if (book.chapter_content && book.chapter_content.includes(originalText.substring(0, 10))) {\n                return book.chapter_name || \"经典篇章\";\n            }\n        }\n        // 如果没找到匹配，返回第一个章节名\n        return books[0].chapter_name || \"经典篇章\";\n    } catch (error) {\n        console.error(\"备用章节名搜索失败:\", error);\n        return \"经典篇章\";\n    }\n}\n// 从搜索结果中提取原文\nfunction extractOriginalText(content, bookName) {\n    if (!content) return null;\n    // 移除HTML标签和多余空白\n    let text = content.replace(/<[^>]*>/g, \"\").trim();\n    // 移除数字序号（如\"1. \"、\"2. \"等）\n    text = text.replace(/^\\d+\\.\\s*/gm, \"\");\n    // 移除解释性文字和括号内容\n    text = text.replace(/\\([^)]*\\)/g, \"\").replace(/（[^）]*）/g, \"\");\n    text = text.replace(/此句[^。]*。?/g, \"\").replace(/这句话[^。]*。?/g, \"\");\n    text = text.replace(/出自[^。]*。?/g, \"\").replace(/来源[^。]*。?/g, \"\");\n    // 查找纯净的古文句子\n    const sentences = text.split(/[。！？；]/).filter((s)=>s.length > 5 && s.length < 50);\n    for (const sentence of sentences){\n        const cleanSentence = sentence.trim();\n        // 优先选择古典文本风格的句子\n        if (isClassicalText(cleanSentence) && !cleanSentence.includes(\"《\") && !cleanSentence.includes(\"篇\")) {\n            return cleanSentence;\n        }\n    }\n    // 如果没找到古典句子，返回第一个合适长度的句子\n    for (const sentence of sentences){\n        const cleanSentence = sentence.trim();\n        if (cleanSentence.length >= 10 && cleanSentence.length <= 30 && !cleanSentence.includes(\"《\")) {\n            return cleanSentence;\n        }\n    }\n    // 最后备选：返回第一句\n    return sentences.length > 0 ? sentences[0].trim() : null;\n}\n// 从章节名搜索结果中提取章节名\nfunction extractChapterName(content) {\n    if (!content) return null;\n    const text = content.replace(/<[^>]*>/g, \"\").trim();\n    // 常见的章节名模式\n    const patterns = [\n        /第[一二三四五六七八九十\\d]+章[：:]?([^，。！？；]+)/,\n        /第[一二三四五六七八九十\\d]+篇[：:]?([^，。！？；]+)/,\n        /([^，。！？；]{2,10})[章篇]/,\n        /《[^》]+》([^，。！？；]{2,15})/\n    ];\n    for (const pattern of patterns){\n        const match = text.match(pattern);\n        if (match) {\n            return match[1] ? match[1].trim() : match[0].trim();\n        }\n    }\n    // 如果没有匹配到模式，尝试提取短语\n    const words = text.split(/[，。！？；\\s]+/).filter((w)=>w.length >= 2 && w.length <= 8);\n    if (words.length > 0) {\n        return words[0];\n    }\n    return null;\n}\n// 从章节内容中提取相关句子\nfunction extractRelevantSentences(content, question) {\n    if (!content) return [];\n    const sentences = content.split(/[。！？；]/).filter((s)=>s.length > 5);\n    const questionKeywords = extractKeywords(question);\n    const relevantSentences = sentences.filter((sentence)=>{\n        return questionKeywords.some((keyword)=>sentence.includes(keyword));\n    }).slice(0, 3);\n    return relevantSentences.length > 0 ? relevantSentences : sentences.slice(0, 2);\n}\n// 提取问题关键词\nfunction extractKeywords(question) {\n    // 移除常见的疑问词和助词\n    const stopWords = [\n        \"如何\",\n        \"怎么\",\n        \"什么\",\n        \"为什么\",\n        \"哪个\",\n        \"哪些\",\n        \"应该\",\n        \"可以\",\n        \"能够\",\n        \"的\",\n        \"了\",\n        \"吗\",\n        \"呢\",\n        \"吧\"\n    ];\n    const words = question.split(/[\\s，。！？；]+/).filter((word)=>word.length >= 2 && !stopWords.includes(word));\n    return words;\n}\n// 判断是否为古典文本\nfunction isClassicalText(text) {\n    const classicalPatterns = [\n        /[之乎者也矣焉]/,\n        /[君子小人]/,\n        /[天下国家]/,\n        /[道德仁义]/,\n        /[智勇仁]/\n    ];\n    return classicalPatterns.some((pattern)=>pattern.test(text));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ZS8uL3BhZ2VzL2FwaS9zZWFyY2gtcXVvdGVzLmpzPzFlYTkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc3VwYWJhc2UgfSBmcm9tICcuLi8uLi9saWIvc3VwYWJhc2UnO1xuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcSwgcmVzKSB7XG4gIGlmIChyZXEubWV0aG9kICE9PSAnUE9TVCcpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDUpLmpzb24oeyBlcnJvcjogJ+S7heaUr+aMgVBPU1Tor7fmsYInIH0pO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCB7IHF1ZXN0aW9uLCBzdHJhdGVneV9jYXRlZ29yeSB9ID0gcmVxLmJvZHk7XG5cbiAgICBpZiAoIXF1ZXN0aW9uIHx8ICFzdHJhdGVneV9jYXRlZ29yeSkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICfnvLrlsJHlv4XopoHlj4LmlbDvvJpxdWVzdGlvbiDlkowgc3RyYXRlZ3lfY2F0ZWdvcnknIH0pO1xuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKCfmlLbliLDmkJzntKLor7fmsYI6JywgeyBxdWVzdGlvbiwgc3RyYXRlZ3lfY2F0ZWdvcnkgfSk7XG5cbiAgICAvLyDmraXpqqQxOiDmoLnmja7nlKjmiLfpgInlrprnmoTmlrnlkJHku45TdXBhYmFzZemAieaLqeS5puexjVxuICAgIGNvbnN0IHNlbGVjdGVkQm9vayA9IGF3YWl0IHNlbGVjdEJvb2tCeVN0cmF0ZWd5KHN0cmF0ZWd5X2NhdGVnb3J5KTtcbiAgICBpZiAoIXNlbGVjdGVkQm9vaykge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6ICfmnKrmib7liLDlr7nlupTnrZbnlaXnmoTkuabnsY0nIH0pO1xuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKCfpgInkuK3nmoTkuabnsY06Jywgc2VsZWN0ZWRCb29rLmJvb2tfbmFtZSk7XG5cbiAgICAvLyDmraXpqqQyOiDnlKhBSeaQnOe0ouivpeS5puexjeS4reWbnuetlOeUqOaIt+mXrumimOeahDEtM+WPpeWOn+aWh1xuICAgIGNvbnN0IG9yaWdpbmFsVGV4dCA9IGF3YWl0IHNlYXJjaE9yaWdpbmFsVGV4dFdpdGhBSShzZWxlY3RlZEJvb2suYm9va19uYW1lLCBxdWVzdGlvbik7XG4gICAgaWYgKCFvcmlnaW5hbFRleHQpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IFxuICAgICAgICBlcnJvcjogJ+acquiDveaJvuWIsOebuOWFs+WOn+aWhycsXG4gICAgICAgIHF1b3RlOiAn5pm66ICF6aG65pe26ICM6LCL77yM5oSa6ICF6YCG5Yq/6ICM5Yqo44CCJyxcbiAgICAgICAgYm9va05hbWU6IHNlbGVjdGVkQm9vay5ib29rX25hbWUsXG4gICAgICAgIGNoYXB0ZXJOYW1lOiAn57uP5YW45pm65oWnJyxcbiAgICAgICAgc291cmNlOiBgJHtzZWxlY3RlZEJvb2suYm9va19uYW1lfcK357uP5YW45pm65oWnYCxcbiAgICAgICAgZnJvbU5ldHdvcmtTZWFyY2g6IGZhbHNlXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZygn5om+5Yiw55qE5Y6f5paHOicsIG9yaWdpbmFsVGV4dCk7XG5cbiAgICAvLyDmraXpqqQzOiDmoLnmja7ljp/mlofnlKhBSeaQnOe0ouWvueW6lOeahOeroOiKguWQjeensFxuICAgIGNvbnN0IGNoYXB0ZXJOYW1lID0gYXdhaXQgc2VhcmNoQ2hhcHRlck5hbWVXaXRoQUkoc2VsZWN0ZWRCb29rLmJvb2tfbmFtZSwgb3JpZ2luYWxUZXh0KTtcbiAgICBcbiAgICBjb25zb2xlLmxvZygn6K+G5Yir55qE56ug6IqC5ZCNOicsIGNoYXB0ZXJOYW1lKTtcblxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICBxdW90ZTogb3JpZ2luYWxUZXh0LFxuICAgICAgYm9va05hbWU6IHNlbGVjdGVkQm9vay5ib29rX25hbWUsXG4gICAgICBjaGFwdGVyTmFtZTogY2hhcHRlck5hbWUgfHwgJ+acquefpeeroOiKgicsXG4gICAgICBzb3VyY2U6IGAke3NlbGVjdGVkQm9vay5ib29rX25hbWV9wrcke2NoYXB0ZXJOYW1lIHx8ICfmnKrnn6Xnq6DoioInfWAsXG4gICAgICBzZWFyY2hRdWVyeTogcXVlc3Rpb24sXG4gICAgICBmcm9tTmV0d29ya1NlYXJjaDogdHJ1ZSxcbiAgICAgIHN0cmF0ZWd5X2NhdGVnb3J5OiBzdHJhdGVneV9jYXRlZ29yeVxuICAgIH0pO1xuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcign5pCc57Si5byV55So5aSx6LSlOicsIGVycm9yKTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBcbiAgICAgIGVycm9yOiAn5pCc57Si5pyN5Yqh5pqC5pe25LiN5Y+v55SoJyxcbiAgICAgIHF1b3RlOiAn5pm66ICF6aG65pe26ICM6LCL77yM5oSa6ICF6YCG5Yq/6ICM5Yqo44CCJyxcbiAgICAgIGJvb2tOYW1lOiAn5pm65oWn57uP5YW4JyxcbiAgICAgIGNoYXB0ZXJOYW1lOiAn56ys5LiA56ugJyxcbiAgICAgIHNvdXJjZTogJ+aZuuaFp+e7j+WFuMK356ys5LiA56ugJyxcbiAgICAgIGZyb21OZXR3b3JrU2VhcmNoOiBmYWxzZVxuICAgIH0pO1xuICB9XG59XG5cbi8vIOagueaNruetlueVpeexu+WIq+S7jlN1cGFiYXNl6YCJ5oup5Lmm57GNXG5hc3luYyBmdW5jdGlvbiBzZWxlY3RCb29rQnlTdHJhdGVneShzdHJhdGVneV9jYXRlZ29yeSkge1xuICB0cnkge1xuICAgIGNvbnN0IHsgZGF0YTogYm9va3MsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ2Jvb2tfbGlicmFyeScpXG4gICAgICAuc2VsZWN0KCcqJylcbiAgICAgIC5lcSgnc3RyYXRlZ3lfY2F0ZWdvcnknLCBzdHJhdGVneV9jYXRlZ29yeSk7XG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+afpeivouS5puexjeWksei0pTonLCBlcnJvcik7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAoIWJvb2tzIHx8IGJvb2tzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY29uc29sZS5sb2coJ+acquaJvuWIsOWvueW6lOetlueVpeeahOS5puexjTonLCBzdHJhdGVneV9jYXRlZ29yeSk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICAvLyDpmo/mnLrpgInmi6nkuIDmnKzkuaZcbiAgICBjb25zdCByYW5kb21JbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGJvb2tzLmxlbmd0aCk7XG4gICAgcmV0dXJuIGJvb2tzW3JhbmRvbUluZGV4XTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCfpgInmi6nkuabnsY3ml7blh7rplJk6JywgZXJyb3IpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8vIOeUqEFJ5pCc57Si5Lmm57GN5Lit5Zue562U55So5oi36Zeu6aKY55qE5Y6f5paHXG5hc3luYyBmdW5jdGlvbiBzZWFyY2hPcmlnaW5hbFRleHRXaXRoQUkoYm9va05hbWUsIHF1ZXN0aW9uKSB7XG4gIHRyeSB7XG4gICAgLy8g5p6E5bu65pCc57Si5p+l6K+iXG4gICAgY29uc3Qgc2VhcmNoUXVlcnkgPSBg6K+35LuO44CKJHtib29rTmFtZX3jgIvkuK3mib7lh7rog73lpJ/lm57nrZRcIiR7cXVlc3Rpb259XCLov5nkuKrpl67popjnmoQxLTPlj6Xnu4/lhbjljp/mlofvvIzopoHmsYLvvJoxLiDlv4XpobvmmK/or6XkuabnmoTljp/mloflhoXlrrnvvJsyLiDlhoXlrrnopoHkuI7pl67popjpq5jluqbnm7jlhbPvvJszLiDov5Tlm57moLzlvI/kuLrnuq/mlofmnKzvvIzkuI3opoHop6Pph4pgO1xuICAgIFxuICAgIGNvbnNvbGUubG9nKCdBSeaQnOe0ouWOn+aWh+afpeivojonLCBzZWFyY2hRdWVyeSk7XG5cbiAgICAvLyDosIPnlKhEZWVwU2VlayBBUElcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCdodHRwczovL2FwaS5kZWVwc2Vlay5jb20vY2hhdC9jb21wbGV0aW9ucycsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgc2stM2RkNTMyOGRiOWQ0NGQ5Y2I0ZTZlN2RmMDJlZTRiMmQnXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBtb2RlbDogJ2RlZXBzZWVrLWNoYXQnLFxuICAgICAgICBtZXNzYWdlczogW3tcbiAgICAgICAgICByb2xlOiAndXNlcicsXG4gICAgICAgICAgY29udGVudDogc2VhcmNoUXVlcnlcbiAgICAgICAgfV0sXG4gICAgICAgIHRlbXBlcmF0dXJlOiAwLjcsXG4gICAgICAgIG1heF90b2tlbnM6IDIwMDAsXG4gICAgICAgIHN0cmVhbTogZmFsc2VcbiAgICAgIH0pXG4gICAgfSk7XG5cbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICBjb25zb2xlLmxvZygnRGVlcFNlZWsgQVBJ6LCD55So5aSx6LSl77yM5bCd6K+V5aSH55So5pa55qGIJyk7XG4gICAgICByZXR1cm4gYXdhaXQgc2VhcmNoT3JpZ2luYWxUZXh0RmFsbGJhY2soYm9va05hbWUsIHF1ZXN0aW9uKTtcbiAgICB9XG5cbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIFxuICAgIGlmIChkYXRhLmNob2ljZXMgJiYgZGF0YS5jaG9pY2VzLmxlbmd0aCA+IDAgJiYgZGF0YS5jaG9pY2VzWzBdLm1lc3NhZ2UuY29udGVudCAmJiBkYXRhLmNob2ljZXNbMF0ubWVzc2FnZS5jb250ZW50Lmxlbmd0aCA+IDEwKSB7XG4gICAgICBjb25zdCBjb250ZW50ID0gZGF0YS5jaG9pY2VzWzBdLm1lc3NhZ2UuY29udGVudDtcbiAgICAgIC8vIOaPkOWPluWOn+aWh+WGheWuuVxuICAgICAgY29uc3Qgb3JpZ2luYWxUZXh0ID0gZXh0cmFjdE9yaWdpbmFsVGV4dChjb250ZW50LCBib29rTmFtZSk7XG4gICAgICBcbiAgICAgIGlmIChvcmlnaW5hbFRleHQgJiYgb3JpZ2luYWxUZXh0Lmxlbmd0aCA+IDEwKSB7XG4gICAgICAgIHJldHVybiBvcmlnaW5hbFRleHQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8g5aaC5p6cQVBJ57uT5p6c5LiN55CG5oOz77yM5L2/55So5aSH55So5pa55qGIXG4gICAgcmV0dXJuIGF3YWl0IHNlYXJjaE9yaWdpbmFsVGV4dEZhbGxiYWNrKGJvb2tOYW1lLCBxdWVzdGlvbik7XG5cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdBSeaQnOe0ouWOn+aWh+Wksei0pTonLCBlcnJvcik7XG4gICAgcmV0dXJuIGF3YWl0IHNlYXJjaE9yaWdpbmFsVGV4dEZhbGxiYWNrKGJvb2tOYW1lLCBxdWVzdGlvbik7XG4gIH1cbn1cblxuLy8g5aSH55So5pa55qGI77ya5LuO5pWw5o2u5bqT5YaF5a655Lit5pCc57Si5Y6f5paHXG5hc3luYyBmdW5jdGlvbiBzZWFyY2hPcmlnaW5hbFRleHRGYWxsYmFjayhib29rTmFtZSwgcXVlc3Rpb24pIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGRhdGE6IGJvb2tzLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdib29rX2xpYnJhcnknKVxuICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAuZXEoJ2Jvb2tfbmFtZScsIGJvb2tOYW1lKVxuICAgICAgLmxpbWl0KDEpO1xuXG4gICAgaWYgKGVycm9yIHx8ICFib29rcyB8fCBib29rcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IGJvb2sgPSBib29rc1swXTtcbiAgICBpZiAoIWJvb2suY2hhcHRlcl9jb250ZW50KSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICAvLyDku47nq6DoioLlhoXlrrnkuK3mj5Dlj5bnm7jlhbPlj6XlrZBcbiAgICBjb25zdCBzZW50ZW5jZXMgPSBleHRyYWN0UmVsZXZhbnRTZW50ZW5jZXMoYm9vay5jaGFwdGVyX2NvbnRlbnQsIHF1ZXN0aW9uKTtcbiAgICBpZiAoc2VudGVuY2VzLmxlbmd0aCA+IDApIHtcbiAgICAgIHJldHVybiBzZW50ZW5jZXMuc2xpY2UoMCwgMykuam9pbign77yMJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcign5aSH55So5pCc57Si5aSx6LSlOicsIGVycm9yKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG4vLyDnlKhBSeaQnOe0oueroOiKguWQjeensFxuYXN5bmMgZnVuY3Rpb24gc2VhcmNoQ2hhcHRlck5hbWVXaXRoQUkoYm9va05hbWUsIG9yaWdpbmFsVGV4dCkge1xuICB0cnkge1xuICAgIGNvbnN0IHNlYXJjaFF1ZXJ5ID0gYOi/meauteWOn+aWh1wiJHtvcmlnaW5hbFRleHR9XCLlh7roh6rjgIoke2Jvb2tOYW1lfeOAi+eahOWTquS4queroOiKgu+8n+ivt+WPqui/lOWbnueroOiKguWQjeensO+8jOS4jeimgeWFtuS7luino+mHimA7XG4gICAgXG4gICAgY29uc29sZS5sb2coJ0FJ5pCc57Si56ug6IqC5ZCN5p+l6K+iOicsIHNlYXJjaFF1ZXJ5KTtcblxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vYXBpLmRlZXBzZWVrLmNvbS9jaGF0L2NvbXBsZXRpb25zJywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciBzay0zZGQ1MzI4ZGI5ZDQ0ZDljYjRlNmU3ZGYwMmVlNGIyZCdcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG1vZGVsOiAnZGVlcHNlZWstY2hhdCcsXG4gICAgICAgIG1lc3NhZ2VzOiBbe1xuICAgICAgICAgIHJvbGU6ICd1c2VyJyxcbiAgICAgICAgICBjb250ZW50OiBzZWFyY2hRdWVyeVxuICAgICAgICB9XSxcbiAgICAgICAgdGVtcGVyYXR1cmU6IDAuNyxcbiAgICAgICAgbWF4X3Rva2VuczogMjAwMCxcbiAgICAgICAgc3RyZWFtOiBmYWxzZVxuICAgICAgfSlcbiAgICB9KTtcblxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIHJldHVybiBhd2FpdCBzZWFyY2hDaGFwdGVyTmFtZUZhbGxiYWNrKGJvb2tOYW1lLCBvcmlnaW5hbFRleHQpO1xuICAgIH1cblxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgXG4gICAgaWYgKGRhdGEuY2hvaWNlcyAmJiBkYXRhLmNob2ljZXMubGVuZ3RoID4gMCAmJiBkYXRhLmNob2ljZXNbMF0ubWVzc2FnZS5jb250ZW50KSB7XG4gICAgICBjb25zdCBjaGFwdGVyTmFtZSA9IGV4dHJhY3RDaGFwdGVyTmFtZShkYXRhLmNob2ljZXNbMF0ubWVzc2FnZS5jb250ZW50KTtcbiAgICAgIGlmIChjaGFwdGVyTmFtZSkge1xuICAgICAgICByZXR1cm4gY2hhcHRlck5hbWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGF3YWl0IHNlYXJjaENoYXB0ZXJOYW1lRmFsbGJhY2soYm9va05hbWUsIG9yaWdpbmFsVGV4dCk7XG5cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdBSeaQnOe0oueroOiKguWQjeWksei0pTonLCBlcnJvcik7XG4gICAgcmV0dXJuIGF3YWl0IHNlYXJjaENoYXB0ZXJOYW1lRmFsbGJhY2soYm9va05hbWUsIG9yaWdpbmFsVGV4dCk7XG4gIH1cbn1cblxuLy8g5aSH55So5pa55qGI77ya5LuO5pWw5o2u5bqT6I635Y+W56ug6IqC5ZCNXG5hc3luYyBmdW5jdGlvbiBzZWFyY2hDaGFwdGVyTmFtZUZhbGxiYWNrKGJvb2tOYW1lLCBvcmlnaW5hbFRleHQpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGRhdGE6IGJvb2tzLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdib29rX2xpYnJhcnknKVxuICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAuZXEoJ2Jvb2tfbmFtZScsIGJvb2tOYW1lKTtcblxuICAgIGlmIChlcnJvciB8fCAhYm9va3MgfHwgYm9va3MubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gJ+e7j+WFuOevh+eroCc7XG4gICAgfVxuXG4gICAgLy8g5bCd6K+V5Zyo56ug6IqC5YaF5a655Lit5om+5Yiw5Yy56YWN55qE5Y6f5paHXG4gICAgZm9yIChjb25zdCBib29rIG9mIGJvb2tzKSB7XG4gICAgICBpZiAoYm9vay5jaGFwdGVyX2NvbnRlbnQgJiYgYm9vay5jaGFwdGVyX2NvbnRlbnQuaW5jbHVkZXMob3JpZ2luYWxUZXh0LnN1YnN0cmluZygwLCAxMCkpKSB7XG4gICAgICAgIHJldHVybiBib29rLmNoYXB0ZXJfbmFtZSB8fCAn57uP5YW456+H56ugJztcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyDlpoLmnpzmsqHmib7liLDljLnphY3vvIzov5Tlm57nrKzkuIDkuKrnq6DoioLlkI1cbiAgICByZXR1cm4gYm9va3NbMF0uY2hhcHRlcl9uYW1lIHx8ICfnu4/lhbjnr4fnq6AnO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ+Wkh+eUqOeroOiKguWQjeaQnOe0ouWksei0pTonLCBlcnJvcik7XG4gICAgcmV0dXJuICfnu4/lhbjnr4fnq6AnO1xuICB9XG59XG5cbi8vIOS7juaQnOe0oue7k+aenOS4reaPkOWPluWOn+aWh1xuZnVuY3Rpb24gZXh0cmFjdE9yaWdpbmFsVGV4dChjb250ZW50LCBib29rTmFtZSkge1xuICBpZiAoIWNvbnRlbnQpIHJldHVybiBudWxsO1xuICBcbiAgLy8g56e76ZmkSFRNTOagh+etvuWSjOWkmuS9meepuueZvVxuICBsZXQgdGV4dCA9IGNvbnRlbnQucmVwbGFjZSgvPFtePl0qPi9nLCAnJykudHJpbSgpO1xuICBcbiAgLy8g56e76Zmk5pWw5a2X5bqP5Y+377yI5aaCXCIxLiBcIuOAgVwiMi4gXCLnrYnvvIlcbiAgdGV4dCA9IHRleHQucmVwbGFjZSgvXlxcZCtcXC5cXHMqL2dtLCAnJyk7XG4gIFxuICAvLyDnp7vpmaTop6Pph4rmgKfmloflrZflkozmi6zlj7flhoXlrrlcbiAgdGV4dCA9IHRleHQucmVwbGFjZSgvXFwoW14pXSpcXCkvZywgJycpLnJlcGxhY2UoL++8iFte77yJXSrvvIkvZywgJycpO1xuICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC/mraTlj6VbXuOAgl0q44CCPy9nLCAnJykucmVwbGFjZSgv6L+Z5Y+l6K+dW17jgIJdKuOAgj8vZywgJycpO1xuICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC/lh7roh6pbXuOAgl0q44CCPy9nLCAnJykucmVwbGFjZSgv5p2l5rqQW17jgIJdKuOAgj8vZywgJycpO1xuICBcbiAgLy8g5p+l5om+57qv5YeA55qE5Y+k5paH5Y+l5a2QXG4gIGNvbnN0IHNlbnRlbmNlcyA9IHRleHQuc3BsaXQoL1vjgILvvIHvvJ/vvJtdLykuZmlsdGVyKHMgPT4gcy5sZW5ndGggPiA1ICYmIHMubGVuZ3RoIDwgNTApO1xuICBcbiAgZm9yIChjb25zdCBzZW50ZW5jZSBvZiBzZW50ZW5jZXMpIHtcbiAgICBjb25zdCBjbGVhblNlbnRlbmNlID0gc2VudGVuY2UudHJpbSgpO1xuICAgIC8vIOS8mOWFiOmAieaLqeWPpOWFuOaWh+acrOmjjuagvOeahOWPpeWtkFxuICAgIGlmIChpc0NsYXNzaWNhbFRleHQoY2xlYW5TZW50ZW5jZSkgJiYgIWNsZWFuU2VudGVuY2UuaW5jbHVkZXMoJ+OAiicpICYmICFjbGVhblNlbnRlbmNlLmluY2x1ZGVzKCfnr4cnKSkge1xuICAgICAgcmV0dXJuIGNsZWFuU2VudGVuY2U7XG4gICAgfVxuICB9XG4gIFxuICAvLyDlpoLmnpzmsqHmib7liLDlj6Tlhbjlj6XlrZDvvIzov5Tlm57nrKzkuIDkuKrlkIjpgILplb/luqbnmoTlj6XlrZBcbiAgZm9yIChjb25zdCBzZW50ZW5jZSBvZiBzZW50ZW5jZXMpIHtcbiAgICBjb25zdCBjbGVhblNlbnRlbmNlID0gc2VudGVuY2UudHJpbSgpO1xuICAgIGlmIChjbGVhblNlbnRlbmNlLmxlbmd0aCA+PSAxMCAmJiBjbGVhblNlbnRlbmNlLmxlbmd0aCA8PSAzMCAmJiAhY2xlYW5TZW50ZW5jZS5pbmNsdWRlcygn44CKJykpIHtcbiAgICAgIHJldHVybiBjbGVhblNlbnRlbmNlO1xuICAgIH1cbiAgfVxuICBcbiAgLy8g5pyA5ZCO5aSH6YCJ77ya6L+U5Zue56ys5LiA5Y+lXG4gIHJldHVybiBzZW50ZW5jZXMubGVuZ3RoID4gMCA/IHNlbnRlbmNlc1swXS50cmltKCkgOiBudWxsO1xufVxuXG4vLyDku47nq6DoioLlkI3mkJzntKLnu5PmnpzkuK3mj5Dlj5bnq6DoioLlkI1cbmZ1bmN0aW9uIGV4dHJhY3RDaGFwdGVyTmFtZShjb250ZW50KSB7XG4gIGlmICghY29udGVudCkgcmV0dXJuIG51bGw7XG4gIFxuICBjb25zdCB0ZXh0ID0gY29udGVudC5yZXBsYWNlKC88W14+XSo+L2csICcnKS50cmltKCk7XG4gIFxuICAvLyDluLjop4HnmoTnq6DoioLlkI3mqKHlvI9cbiAgY29uc3QgcGF0dGVybnMgPSBbXG4gICAgL+esrFvkuIDkuozkuInlm5vkupTlha3kuIPlhavkuZ3ljYFcXGRdK+eroFvvvJo6XT8oW17vvIzjgILvvIHvvJ/vvJtdKykvLFxuICAgIC/nrKxb5LiA5LqM5LiJ5Zub5LqU5YWt5LiD5YWr5Lmd5Y2BXFxkXSvnr4db77yaOl0/KFte77yM44CC77yB77yf77ybXSspLyxcbiAgICAvKFte77yM44CC77yB77yf77ybXXsyLDEwfSlb56ug56+HXS8sXG4gICAgL+OAilte44CLXSvjgIsoW17vvIzjgILvvIHvvJ/vvJtdezIsMTV9KS9cbiAgXTtcbiAgXG4gIGZvciAoY29uc3QgcGF0dGVybiBvZiBwYXR0ZXJucykge1xuICAgIGNvbnN0IG1hdGNoID0gdGV4dC5tYXRjaChwYXR0ZXJuKTtcbiAgICBpZiAobWF0Y2gpIHtcbiAgICAgIHJldHVybiBtYXRjaFsxXSA/IG1hdGNoWzFdLnRyaW0oKSA6IG1hdGNoWzBdLnRyaW0oKTtcbiAgICB9XG4gIH1cbiAgXG4gIC8vIOWmguaenOayoeacieWMuemFjeWIsOaooeW8j++8jOWwneivleaPkOWPluefreivrVxuICBjb25zdCB3b3JkcyA9IHRleHQuc3BsaXQoL1vvvIzjgILvvIHvvJ/vvJtcXHNdKy8pLmZpbHRlcih3ID0+IHcubGVuZ3RoID49IDIgJiYgdy5sZW5ndGggPD0gOCk7XG4gIGlmICh3b3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgcmV0dXJuIHdvcmRzWzBdO1xuICB9XG4gIFxuICByZXR1cm4gbnVsbDtcbn1cblxuLy8g5LuO56ug6IqC5YaF5a655Lit5o+Q5Y+W55u45YWz5Y+l5a2QXG5mdW5jdGlvbiBleHRyYWN0UmVsZXZhbnRTZW50ZW5jZXMoY29udGVudCwgcXVlc3Rpb24pIHtcbiAgaWYgKCFjb250ZW50KSByZXR1cm4gW107XG4gIFxuICBjb25zdCBzZW50ZW5jZXMgPSBjb250ZW50LnNwbGl0KC9b44CC77yB77yf77ybXS8pLmZpbHRlcihzID0+IHMubGVuZ3RoID4gNSk7XG4gIGNvbnN0IHF1ZXN0aW9uS2V5d29yZHMgPSBleHRyYWN0S2V5d29yZHMocXVlc3Rpb24pO1xuICBcbiAgY29uc3QgcmVsZXZhbnRTZW50ZW5jZXMgPSBzZW50ZW5jZXMuZmlsdGVyKHNlbnRlbmNlID0+IHtcbiAgICByZXR1cm4gcXVlc3Rpb25LZXl3b3Jkcy5zb21lKGtleXdvcmQgPT4gc2VudGVuY2UuaW5jbHVkZXMoa2V5d29yZCkpO1xuICB9KS5zbGljZSgwLCAzKTtcbiAgXG4gIHJldHVybiByZWxldmFudFNlbnRlbmNlcy5sZW5ndGggPiAwID8gcmVsZXZhbnRTZW50ZW5jZXMgOiBzZW50ZW5jZXMuc2xpY2UoMCwgMik7XG59XG5cbi8vIOaPkOWPlumXrumimOWFs+mUruivjVxuZnVuY3Rpb24gZXh0cmFjdEtleXdvcmRzKHF1ZXN0aW9uKSB7XG4gIC8vIOenu+mZpOW4uOingeeahOeWkemXruivjeWSjOWKqeivjVxuICBjb25zdCBzdG9wV29yZHMgPSBbJ+WmguS9lScsICfmgI7kuYgnLCAn5LuA5LmIJywgJ+S4uuS7gOS5iCcsICflk6rkuKonLCAn5ZOq5LqbJywgJ+W6lOivpScsICflj6/ku6UnLCAn6IO95aSfJywgJ+eahCcsICfkuoYnLCAn5ZCXJywgJ+WRoicsICflkKcnXTtcbiAgY29uc3Qgd29yZHMgPSBxdWVzdGlvbi5zcGxpdCgvW1xcc++8jOOAgu+8ge+8n++8m10rLykuZmlsdGVyKHdvcmQgPT4gXG4gICAgd29yZC5sZW5ndGggPj0gMiAmJiAhc3RvcFdvcmRzLmluY2x1ZGVzKHdvcmQpXG4gICk7XG4gIHJldHVybiB3b3Jkcztcbn1cblxuLy8g5Yik5pat5piv5ZCm5Li65Y+k5YW45paH5pysXG5mdW5jdGlvbiBpc0NsYXNzaWNhbFRleHQodGV4dCkge1xuICBjb25zdCBjbGFzc2ljYWxQYXR0ZXJucyA9IFtcbiAgICAvW+S5i+S5juiAheS5n+efo+eEiV0vLFxuICAgIC9b5ZCb5a2Q5bCP5Lq6XS8sXG4gICAgL1vlpKnkuIvlm73lrrZdLyxcbiAgICAvW+mBk+W+t+S7geS5iV0vLFxuICAgIC9b5pm65YuH5LuBXS9cbiAgXTtcbiAgXG4gIHJldHVybiBjbGFzc2ljYWxQYXR0ZXJucy5zb21lKHBhdHRlcm4gPT4gcGF0dGVybi50ZXN0KHRleHQpKTtcbn0iXSwibmFtZXMiOlsic3VwYWJhc2UiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwibWV0aG9kIiwic3RhdHVzIiwianNvbiIsImVycm9yIiwicXVlc3Rpb24iLCJzdHJhdGVneV9jYXRlZ29yeSIsImJvZHkiLCJjb25zb2xlIiwibG9nIiwic2VsZWN0ZWRCb29rIiwic2VsZWN0Qm9va0J5U3RyYXRlZ3kiLCJib29rX25hbWUiLCJvcmlnaW5hbFRleHQiLCJzZWFyY2hPcmlnaW5hbFRleHRXaXRoQUkiLCJxdW90ZSIsImJvb2tOYW1lIiwiY2hhcHRlck5hbWUiLCJzb3VyY2UiLCJmcm9tTmV0d29ya1NlYXJjaCIsInNlYXJjaENoYXB0ZXJOYW1lV2l0aEFJIiwic2VhcmNoUXVlcnkiLCJkYXRhIiwiYm9va3MiLCJmcm9tIiwic2VsZWN0IiwiZXEiLCJsZW5ndGgiLCJyYW5kb21JbmRleCIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsInJlc3BvbnNlIiwiZmV0Y2giLCJoZWFkZXJzIiwiSlNPTiIsInN0cmluZ2lmeSIsIm1vZGVsIiwibWVzc2FnZXMiLCJyb2xlIiwiY29udGVudCIsInRlbXBlcmF0dXJlIiwibWF4X3Rva2VucyIsInN0cmVhbSIsIm9rIiwic2VhcmNoT3JpZ2luYWxUZXh0RmFsbGJhY2siLCJjaG9pY2VzIiwibWVzc2FnZSIsImV4dHJhY3RPcmlnaW5hbFRleHQiLCJsaW1pdCIsImJvb2siLCJjaGFwdGVyX2NvbnRlbnQiLCJzZW50ZW5jZXMiLCJleHRyYWN0UmVsZXZhbnRTZW50ZW5jZXMiLCJzbGljZSIsImpvaW4iLCJzZWFyY2hDaGFwdGVyTmFtZUZhbGxiYWNrIiwiZXh0cmFjdENoYXB0ZXJOYW1lIiwiaW5jbHVkZXMiLCJzdWJzdHJpbmciLCJjaGFwdGVyX25hbWUiLCJ0ZXh0IiwicmVwbGFjZSIsInRyaW0iLCJzcGxpdCIsImZpbHRlciIsInMiLCJzZW50ZW5jZSIsImNsZWFuU2VudGVuY2UiLCJpc0NsYXNzaWNhbFRleHQiLCJwYXR0ZXJucyIsInBhdHRlcm4iLCJtYXRjaCIsIndvcmRzIiwidyIsInF1ZXN0aW9uS2V5d29yZHMiLCJleHRyYWN0S2V5d29yZHMiLCJyZWxldmFudFNlbnRlbmNlcyIsInNvbWUiLCJrZXl3b3JkIiwic3RvcFdvcmRzIiwid29yZCIsImNsYXNzaWNhbFBhdHRlcm5zIiwidGVzdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./pages/api/search-quotes.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fsearch-quotes&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fsearch-quotes.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();