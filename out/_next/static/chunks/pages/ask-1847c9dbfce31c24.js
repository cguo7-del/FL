(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[721],{7699:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/ask",function(){return t(5146)}])},5981:function(e,s,t){"use strict";t.d(s,{Y:function(){return n}});let a=(0,t(1608).eI)("https://crnfwlpcxrnqfgwqnmun.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNybmZ3bHBjeHJucWZnd3FubXVuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUxNTAzMDQsImV4cCI6MjA3MDcyNjMwNH0.g_HmFQQiuGW2TZRzZ5gqCj098DZy6iwn_xQAE6kEUEI"),n={supabase:a,async insert(e,s){let{data:t,error:n}=await a.from(e).insert(s).select();if(n)throw console.error("插入数据错误:",n),n;return t},async select(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=a.from(e).select("*");Object.entries(s).forEach(e=>{let[s,a]=e;t=t.eq(s,a)});let{data:n,error:i}=await t;if(i)throw console.error("查询数据错误:",i),i;return n},async update(e,s,t){let{data:n,error:i}=await a.from(e).update(t).eq("id",s).select();if(i)throw console.error("更新数据错误:",i),i;return n},async delete(e,s){let{error:t}=await a.from(e).delete().eq("id",s);if(t)throw console.error("删除数据错误:",t),t;return!0},async testConnection(){try{let{data:e,error:s}=await a.rpc("version");if(s){let{error:e}=await a.from("test_connection_table").select("*").limit(1);if(e&&("PGRST116"===e.code||"42P01"===e.code))return console.log("数据库连接成功!"),!0;return console.error("数据库连接测试失败:",e||s),!1}return console.log("数据库连接成功!"),!0}catch(e){return console.error("连接测试异常:",e),!1}}}},5146:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return l}});var a=t(5893),n=t(7294),i=t(8339),r=t.n(i),c=t(5981);function l(){let[e,s]=(0,n.useState)(""),[t,i]=(0,n.useState)(!1),[l,o]=(0,n.useState)(""),[d,u]=(0,n.useState)("未连接"),[_,h]=(0,n.useState)([]);(0,n.useEffect)(()=>{(async()=>{try{let e=await c.Y.testConnection();u(e?"已连接":"连接失败")}catch(e){u("连接错误"),console.error("数据库连接测试失败:",e)}})()},[]);let m=e=>{h(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},x=async s=>{if(s.preventDefault(),e.trim()){i(!0);try{let s=_.length>0?_.join(","):"",t=new URLSearchParams({question:e,...s&&{strategies:s}});window.location.href="/answer?".concat(t.toString())}finally{i(!1)}}};return(0,a.jsxs)("div",{className:r().container,children:[(0,a.jsxs)("nav",{className:r().navbar,children:[(0,a.jsx)("div",{className:r().brand,children:"方略 Fanglue"}),(0,a.jsxs)("div",{className:r().navLinks,children:[(0,a.jsx)("a",{href:"/",className:r().navLink,children:"返回首页"}),(0,a.jsxs)("div",{className:r().dbStatus,children:["数据库: ",d]})]})]}),(0,a.jsxs)("main",{className:r().mainContent,children:[(0,a.jsxs)("div",{className:r().header,children:[(0,a.jsx)("h1",{className:r().title,children:"问古今，寻方略"}),(0,a.jsx)("p",{className:r().subtitle,children:"请输入您的问题，让古智与算法为您解答"})]}),(0,a.jsxs)("form",{onSubmit:x,className:r().questionForm,children:[(0,a.jsx)("div",{className:r().inputGroup,children:(0,a.jsx)("textarea",{value:e,onChange:e=>s(e.target.value),placeholder:"请输入您的问题...\\n\\n例如：\\n• 如何在商业竞争中制定策略？\\n• 古代兵法在现代管理中的应用\\n• 面对困境时的决策思路",className:r().questionInput,rows:6,disabled:t})}),(0,a.jsxs)("div",{className:r().strategySection,children:[(0,a.jsx)("h3",{className:r().strategyTitle,children:"方略经纬"}),(0,a.jsx)("p",{className:r().strategySubtitle,children:"选择您希望参考的智慧方向（可多选或不选）"}),(0,a.jsx)("div",{className:r().strategyGrid,children:[{id:"行正持礼",label:"行正持礼",description:"论语、孟子、礼记、近思录"},{id:"顺势而为",label:"顺势而为",description:"道德经、庄子、淮南子"},{id:"巧谋实战",label:"巧谋实战",description:"孙子兵法、鬼谷子、资治通鉴、三十六计"},{id:"运筹帷幄",label:"运筹帷幄",description:"韩非子、商君书、盐铁论、贞观政要"}].map(e=>(0,a.jsx)("div",{className:"".concat(r().strategyOption," ").concat(_.includes(e.id)?r().selected:""),onClick:()=>m(e.id),children:(0,a.jsxs)("div",{className:r().strategyCheckbox,children:[(0,a.jsx)("input",{type:"checkbox",id:e.id,checked:_.includes(e.id),onChange:()=>m(e.id),className:r().checkbox}),(0,a.jsxs)("label",{htmlFor:e.id,className:r().checkboxLabel,children:[(0,a.jsx)("div",{className:r().strategyLabel,children:e.label}),(0,a.jsx)("div",{className:r().strategyDescription,children:e.description})]})]})},e.id))})]}),(0,a.jsx)("button",{type:"submit",className:r().submitButton,disabled:!e.trim()||t,children:t?"正在思考...":"立即寻索"})]}),l&&(0,a.jsxs)("div",{className:r().answerSection,children:[(0,a.jsx)("h3",{className:r().answerTitle,children:"方略解答"}),(0,a.jsx)("div",{className:r().answerContent,children:l})]}),(0,a.jsxs)("div",{className:r().features,children:[(0,a.jsxs)("div",{className:r().featureItem,children:[(0,a.jsx)("div",{className:r().featureIcon,children:"\uD83D\uDCDA"}),(0,a.jsxs)("div",{className:r().featureText,children:[(0,a.jsx)("div",{className:r().featureTitle,children:"博古通今"}),(0,a.jsx)("div",{className:r().featureDesc,children:"融合古代智慧与现代思维"})]})]}),(0,a.jsxs)("div",{className:r().featureItem,children:[(0,a.jsx)("div",{className:r().featureIcon,children:"\uD83C\uDFAF"}),(0,a.jsxs)("div",{className:r().featureText,children:[(0,a.jsx)("div",{className:r().featureTitle,children:"精准解答"}),(0,a.jsx)("div",{className:r().featureDesc,children:"针对性分析，实用性建议"})]})]}),(0,a.jsxs)("div",{className:r().featureItem,children:[(0,a.jsx)("div",{className:r().featureIcon,children:"⚡"}),(0,a.jsxs)("div",{className:r().featureText,children:[(0,a.jsx)("div",{className:r().featureTitle,children:"即时响应"}),(0,a.jsx)("div",{className:r().featureDesc,children:"快速获得深度思考结果"})]})]})]})]}),(0,a.jsx)("footer",{className:r().footer,children:(0,a.jsx)("p",{children:"\xa9 2024 方略 Fanglue - 让千载经略，为你今日一策"})})]})}},8339:function(e){e.exports={container:"Ask_container__K8Er4",navbar:"Ask_navbar__nZK1Y",brand:"Ask_brand__kNLBD",navLinks:"Ask_navLinks__dRjsn",navLink:"Ask_navLink__QzufV",dbStatus:"Ask_dbStatus__dVUJK",mainContent:"Ask_mainContent__AMGTl",header:"Ask_header__PTw99",title:"Ask_title__omFmW",subtitle:"Ask_subtitle__hitrC",questionForm:"Ask_questionForm__WUnSJ",inputGroup:"Ask_inputGroup__epmN7",questionInput:"Ask_questionInput__oIowT",strategySection:"Ask_strategySection__bOqWF",strategyTitle:"Ask_strategyTitle__V9Cn_",strategySubtitle:"Ask_strategySubtitle__K2DYa",strategyGrid:"Ask_strategyGrid__CqRp9",strategyOption:"Ask_strategyOption__bkvtG",selected:"Ask_selected__7JCMj",strategyCheckbox:"Ask_strategyCheckbox__tr7B_",checkbox:"Ask_checkbox__hl8gQ",checkboxLabel:"Ask_checkboxLabel__64Jur",strategyLabel:"Ask_strategyLabel__J_FWp",strategyDescription:"Ask_strategyDescription__ohVNe",submitButton:"Ask_submitButton__tig4h"}}},function(e){e.O(0,[608,774,888,179],function(){return e(e.s=7699)}),_N_E=e.O()}]);